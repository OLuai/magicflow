@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@


@section Styles{
    @*<link rel="stylesheet" abp-href="/view-resources/Areas/App/Views/_Bundles/customizable-dashboard-libs.css" asp-append-version="true" />*@
    @*<link rel="stylesheet" abp-href="~/view-resources/Areas/App/Views/_Bundles/gridstack.min.css" asp-append-version="true" />*@
    <link href="~/gridstack/dist/gridstack.css" rel="stylesheet" />


    <style type="text/css">
        .grid-stack {
            /*background: #FAFAD2;*/
        }

        .grid-stack-item-content {
            color: #2c3e50;
            text-align: left;
            background-color: transparent;
            border-radius: 5px;
        }

        .isNotEditMode {
            display: none !important;
        }
    </style>
    <style>
        #iamWidgetDisplayName {
            display: flex;
            align-items: center;
        }

        #iamWidgetEditName {
            display: none;
        }

            #iamWidgetEditName input {
                margin-right: 10px;
                font-weight: 200;
                font-size: medium;
                width: 200px;
                max-width: 100%;
                margin-bottom: 10px;
                background: transparent;
                border: none;
                border-bottom: 2px solid red;
            }

                #iamWidgetEditName input:focus {
                    outline: none;
                    color: darkred;
                }

            #iamWidgetEditName span:hover, #iamWidgetBtnEditWidgetName {
                cursor: pointer
            }

        #iamWidgetNameSave {
            width: 40px;
            color: #fff !important;
            text-decoration: none;
            padding: 7px;
            border-radius: 30px;
            border: none;
            transition: all 0.4s ease 0s;
            margin-top: 10px;
        }

            #iamWidgetNameSave:hover {
                text-shadow: 0px 0px 6px rgba(255, 255, 255, 1);
                -webkit-box-shadow: 0px 5px 40px -10px rgba(0, 0, 0, 0.57);
                -moz-box-shadow: 0px 5px 40px -10px rgba(0, 0, 0, 0.57);
                transition: all 0.4s ease 0s;
            }

        #iamWidgetNameCancel {
            width: 40px;
            color: #fff !important;
            text-decoration: none;
            padding: 7px;
            border-radius: 30px;
            border: none;
            transition: all 0.4s ease 0s;
            margin-top: 10px;
        }

            #iamWidgetNameCancel:hover {
                text-shadow: 0px 0px 6px rgba(255, 255, 255, 1);
                -webkit-box-shadow: 0px 5px 40px -10px rgba(0, 0, 0, 0.57);
                -moz-box-shadow: 0px 5px 40px -10px rgba(0, 0, 0, 0.57);
                transition: all 0.4s ease 0s;
            }

        #iamWidgetEditDescription input {
            margin-right: 10px;
            font-weight: 100;
            color: #7E8299;
            font-size: medium;
            width: 400px;
            margin-bottom: 10px;
            background: transparent;
            border: none;
            border-bottom: 1px solid #7E8299;
        }

            #iamWidgetEditDescription input:focus {
                outline: none;
                color: black;
                border-bottom: 2px solid #7E8299;
            }
    </style>
}


@section Scripts
{
    @*<script src="~/gridstack/dist/jq/jquery.js"></script>
        <script src="~/gridstack/dist/jq/jquery-ui.js"></script>*@
    @*<script asp-src="/view-resources/Areas/App/Views/_Bundles/customizable-dashboard-libs.min.js" asp-append-version="true"></script>*@
    @*<script asp-src="~/view-resources/Areas/App/Views/_Bundles/gridstack.min.js" asp-append-version="true"></script>*@
    <script src="~/gridstack/dist/gridstack-h5.js"></script>
    @*<script src="~/gridstack/dist/gridstack-jq.js"></script>
        <script src="~/gridstack/dist/gridstack-poly.js"></script>*@
    <script src="~/lib/ejs.js"></script>
    <script src="~/view-resources/Areas/App/Views/MagicWidget/iamWidget.js"></script>
    <script abp-src="/view-resources/Areas/App/Views/MagicPortal/index.js" asp-append-version="true"></script>
    <script>

        //Mode edition du nom du widget
        $('#iamWidgetBtnEditWidgetName, #iamWidgetName0').on('click', function () {

            var itemWrapper = $(this).closest('.item-container'),
                currentItemLabel = itemWrapper.find('#iamWidgetName').text().trim();

            itemWrapper.find('#iamWidgetDisplayName').hide();
            itemWrapper.find('#iamWidgetEditName').show();
            itemWrapper.find('#iamWidgetNameInput').val(currentItemLabel);
            //itemWrapper.find('#iamWidgetNameInput').show();

        });

        $('#iamWidgetNameCancel, #iamWidgetNameSave').on('click', function () {
            $('#iamWidgetDisplayName').show();
            $('#iamWidgetEditName').hide();
        });
    </script>

}


<abp-page-subheader>
    <div class="subheader py-2 py-lg-4 subheader-solid" id="kt_subheader" style="" kt-hidden-height="54">
        <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
            <!--begin::Info-->
            <div class="d-flex align-items-center flex-wrap mr-1">
                <!--begin::Page Title-->
                @*<h5 class="text-dark font-weight-bold mt-2 mb-2 mr-5">
                        Portal
                    </h5>*@
                <div class="item-container d-flex align-items-center">

                    <div id="iamWidgetDisplayName">
                        <h5 class="text-dark font-weight-bold my-0 mx-5" id="iamWidgetName">
                            
                        </h5>
                        <span id="iamWidgetBtnEditWidgetName" style="display:none;" class="mx-3 my-0">
                            <i class="fa fa-edit icon-1x text-primary"></i>
                        </span>
                    </div>
                    <div id="iamWidgetEditName" class="iamWidgetEditName">
                        <input id="iamWidgetNameInput" class="my-0 mx-5" type="text">
                        <span class="svg-icon svg-icon-success svg-icon-3x mx-3 my-0"
                              id="iamWidgetNameSave">
                            <i class="fa fa-check icon-x2 text-success"></i>
                        </span>
                        <span class="svg-icon svg-icon-danger svg-icon-3x mx-3 my-0"
                              id="iamWidgetNameCancel">
                            <i class="fa fa-times icon-x2 text-danger"></i>
                        </span>
                    </div>
                </div>
                <!--end::Page Title-->
                <div class="subheader-separator subheader-separator-ver mt-2 mb-2 mr-4 bg-gray-200"></div>
                <span class="text-muted font-weight-bold mr-4"></span>

            </div>
            <!--end::Info-->
            <!--begin::Toolbar-->
            <div class="d-flex align-items-center">

                <span class="switch switch-icon">
                    <label>
                        <input type="checkbox" id="ia-gridstack-editmode">
                        <span></span>
                    </label>
                </span>
                <strong class="p-2 pt-4 dashboard-header-text-edit-mode">
                    Mode édition
                </strong>

            </div>
            <!--end::Toolbar-->
        </div>
    </div>
</abp-page-subheader>

<div id="kt_content" class="content d-flex flex-column flex-column-fluid">

    <div class="container-fluid">

        <div id="iamdashboard" class="">

        </div>

    </div>

</div>




